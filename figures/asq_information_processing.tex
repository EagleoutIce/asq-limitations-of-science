\input{global-config.src}

\begin{document}
\begin{tikzpicture}[block/.append style={fill=white,text width=2.5cm,minimum height=1.85em,font=\footnotesize\sffamily}]

  \node[block,text=paletteA,draw=gray,text width=3.25cm] (s) at(0,0) {\textbf{Stimulus event}};
  \node[block,below right,yshift=-0.35cm] (p) at(s.south west) {Perception};
  \node[block,below=0.25cm] (i) at(p.south) {Initial encoding};
  \node[block,below=0.25cm] (f) at(i.south) {Further inferences};
  \node[block,text=paletteA,draw=gray,below right,yshift=-0.35cm,text width=3.25cm] (b) at(f.south west) {\textbf{Behavioral response}};

  \path (i.east) -- (f.east) node[pos=0.5,block,text width=,align=center,text width=1.6cm,right=0.35cm] (m) {Organized\\knowledge};

  % double arrows
  \draw[-Kite,rounded corners=1pt] (i.8) -| (m.north);
  \draw[Kite-] (i.-5) -- (i.-5-|m.west);
  \draw[Kite-,rounded corners=1pt] (f.-8) -| (m.south);
  \draw[-Kite] (f.5) -- (f.5-|m.west);

  \begin{pgfonlayer}{background}
    \draw[densely dashed,gray,rounded corners=2pt] ([yshift=-0.15cm,xshift=-0.15cm]f.south west) rectangle ([yshift=0.15cm,xshift=0.15cm]p.north east-|m.east);

    \draw[-Kite] (s.south-|p.north) -- (b.north-|p.north);
  \end{pgfonlayer}
\end{tikzpicture}
\end{document}